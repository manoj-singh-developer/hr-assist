<!-- CARD GENERAL INFO -->
<md-card class="has-progress-bar">





  <!-- CARD TITLE -->
  <md-card-title layout="row" layout-align="top center">

    <span
      class="userLogout"
      ng-click="userGeneral.userLogOut()"
      ng-if="!userGeneral.isAdmin">
      Logout
    </span>

    <md-card-title-text>
      <span class="md-headline">General informations</span>
      <p class="u-font-small u-no-margin">
        <!-- <strong>Last Update at: {{userGeneral.user.updatedAt | date: 'longDate'}}</strong> -->
      </p>
    </md-card-title-text>

    <button class="md-primary md-button" type="button"
      ng-click="userGeneral.generateCv()" aria-label="Generate CV">
      <md-icon class="material-icons ng-scope" role="img" aria-label="Generate CV">picture_as_pdf</md-icon>
      <span class="ng-scope">
        Generate CV
      </span><div class="md-ripple-container"></div>
    </button>

    <button class="md-primary md-button" type="button"
      ng-click="userGeneral.generateCv('doc')" aria-label="Generate CV"
      ng-if="userGeneral.isAdmin">
      <md-icon class="material-icons ng-scope" role="img" aria-label="Generate CV">file_download</md-icon>
      <span class="ng-scope">
        Generate CV DOC
      </span><div class="md-ripple-container"></div>
    </button>

  </md-card-title>
  <!-- /CARD TITLE -->





  <!-- CARD NOTES -->
  <md-content class="c-card-profile__notes">
    <p>
      <strong>NOTE: </strong>Complete here with your general personal/work information.
    </p>
  </md-content>
  <!-- CARD NOTES -->





  <!-- PREVIEW -->
  <md-content
    ng-show="!userGeneral.settings.showForm"
    class="c-card-profile__preview">
   <section layout-gt-xs="row">

    <div class="c-card-profile__picture"
      flex="20"
      layout-align="top center">
      <img
        gravatar-src="userGeneral.user.email" gravatar-size="100"
        class="md-card-image cv-picture">
    </div>

     <div flex="80" class="c-card-profile__general-info">

      <p class="c-card-profile__info c-card-profile__name u-clearfix">
        <span class="c-card-profile__info-text u-float-right">
          <strong>
            {{userGeneral.user.first_name}} {{userGeneral.user.middle_name}} {{userGeneral.user.last_name}}
          </strong>
        </span>
      </p>

      <p class="c-card-profile__info u-clearfix">
        <strong>Birthday: </strong>
        <span class="u-float-right">
          {{ userGeneral.user.birthday | date: 'dd MMMM yyyy' }}
        </span>
      </p>

      <p class="c-card-profile__info c-card-profile__phone u-clearfix">
        <strong>Phone: </strong>
        <span class="u-float-right">
          {{ userGeneral.user.phone }}
        </span>
      </p>

      <p class="c-card-profile__info c-card-profile__email u-clearfix">
        <strong>Other email: </strong>
        <span class="u-float-right">
          {{ userGeneral.user.other_email }}
        </span>
      </p>

      <p class="c-card-profile__info c-card-profile__address u-clearfix">
        <strong>Address: </strong>
        <span class="u-float-right">
          {{ userGeneral.user.address }}
        </span>
      </p>

      <p class="c-card-profile__info u-clearfix">
        <strong>Car's license plate: </strong>
        <span class="u-float-right">
          {{ userGeneral.user.car_plate }}
        </span>
      </p>

      <md-divider
        class="md-padding divider-bold u-no-padding u-mt-20 u-mb-20">
      </md-divider>

      <p class="c-card-profile__info c-card-profile__email u-clearfix">
        <strong>Start date at Company: </strong>
        <span class="u-float-right">
          {{ userGeneral.user.company_start_date | date: 'MMMM yyyy' }}
        </span>
      </p>

      <p class="c-card-profile__info c-card-profile__email u-clearfix">
        <strong>Position: </strong>
        <span class="u-float-right">
          {{ userGeneral.position.name }}
        </span>
      </p>

      <p class="c-card-profile__info c-card-profile__email u-clearfix" ng-if="userGeneral.department">
        <strong>Department: </strong>
        <span class="u-float-right">
          {{ userGeneral.department.name }}
        </span>
      </p>
      <p class="c-card-profile__info c-card-profile__email u-clearfix" ng-if="userGeneral.department">
        <strong>Functional Manager: </strong>
        <span class="u-float-right">
          {{ userGeneral.department.functional_manager }}
        </span>
      </p>

      <p class="c-card-profile__info c-card-profile__email u-clearfix">
        <strong>Company email: </strong>
         <span class="u-float-right">
          {{ userGeneral.user.email }}
        </span>
      </p>

      <p class="c-card-profile__info u-clearfix">
        <strong>Office: </strong>
        <span class="u-float-right">
          {{ userGeneral.user.office_nr }}
        </span>
      </p>

      <p class="c-card-profile__info u-clearfix">
        <strong>Contract type: </strong>
        <span class="u-float-right">
          {{ userGeneral.schedule.name }}
        </span>
      </p>

      <p class="c-card-profile__info u-clearfix">
        <strong>Personal Identification number: </strong>
        <span class="u-float-right">
          {{ userGeneral.user.cnp }}
        </span>
      </p>

      <p class="c-card-profile__info u-clearfix">
        <strong>Bitbucket Username: </strong>
        <span class="u-float-right">
          {{ userGeneral.user.work_info.bitbucket }}
        </span>
      </p>
      <p class="c-card-profile__info u-clearfix">
        <strong>Github Username: </strong>
        <span class="u-float-right">
          {{ userGeneral.user.work_info.github }}
        </span>
      </p>

      <p class="c-card-profile__info u-clearfix"
        ng-if="userGeneral.user.work_info.ssh_public_key.length">
        <strong>Public SSH key: </strong>
        <span class="u-float-right" ng-click="userGeneral.viewSsh()">
            <span ng-show="!userGeneral.showSshKey">
              <md-icon class="material-icons md-primary">visibility</md-icon>View SSH key
            </span>
            <span ng-show="userGeneral.showSshKey">
              <md-icon class="material-icons md-primary">visibility_off</md-icon>
              Hide SSH key
            </span>
        </span>
        <p class="wrap-text" ng-if="userGeneral.showSshKey">
          {{ userGeneral.user.work_info.ssh_public_key }}
        </p>
      </p>

      <md-divider
        class="md-padding divider-bold u-no-padding u-mt-20 u-mb-20">
      </md-divider>

      <p class="c-card-profile__info u-clearfix">
        <strong>Urgent Contact Person:</strong>
        <span class="u-float-right">
          {{ userGeneral.user.urgent_contact_name }}
        </span>
      </p>

      <p class="c-card-profile__info">
        <strong>Urgent Contact Phone: </strong>
        <span class="u-float-right">
            {{ userGeneral.user.urgent_contact_phone }}
        </span>
      </p>

     </div>

    </section>
  </md-content>
  <!-- /PREVIEW -->





  <form novalidate
    name="generalInfoForm"
    ng-submit="$event.preventDefault()">
    <!-- EDIT -->
    <md-content
      class="md-padding"
      ng-show="userGeneral.settings.showForm">

      <!-- PERSONAL INFO -->
      <md-divider class="divider-bold u-mt-15 u-mb-20"></md-divider>

      <!-- First Name -->
      <div layout-gt-xs="row">
        <md-input-container md-no-float class="md-block" flex-gt-xs="">

          <label>First Name</label>
          <input
            type="text"
            ng-model="userGeneral.user.first_name"
            name=first_name
            ng-pattern="/[a-zA-Z\.'-\s]{3,30}$/"
            required>

          <div ng-messages="generalInfoForm.first_name.$error">
            <div ng-message="required">First Name field is required</div>
            <div ng-message="pattern">Please enter a valid first name</div>
          </div>

        </md-input-container>
      </div>
      <!-- /First Name -->

      <!-- Middle Name -->
      <div layout-gt-xs="row">
        <md-input-container md-no-float class="md-block" flex-gt-xs="">

          <label>Middle Name</label>
          <input
            type="text"
            ng-model="userGeneral.user.middle_name"
            name="middleName"
            ng-pattern="/[a-zA-Z\.'-\s]{1,30}$/"
            ng-disabled="userGeneral.disabledgeneralInfo">

          <div ng-messages="generalInfoForm.middleName.$error">
            <div ng-message="required">This field is required</div>
            <div ng-message="pattern">Please enter a valid middle name</div>
          </div>

        </md-input-container>
      </div>
      <!-- /Middle Name -->

      <!-- Last Name -->
      <div layout-gt-xs="row">
        <md-input-container md-no-float class="md-block" flex-gt-xs="">

          <label>Last Name</label>
          <input
            type="text"
            ng-model="userGeneral.user.last_name"
            name="last_name"
            ng-pattern="/[a-zA-Z\.'-\s]{3,30}$/"
            required>

          <div ng-messages="generalInfoForm.last_name.$error">
            <div ng-message="required">This field is required</div>
            <div ng-message="pattern">Please enter a valid Last Name</div>
          </div>

        </md-input-container>
      </div>
      <!-- Last Name -->

      <!-- BIRTHDAY -->
      <div layout-gt-xs="row" layout-align="start center" class="u-ml-10 u-mr-10">
        <label class="u-mr-20">Birthday</label>
        <md-datepicker
          ng-model="userGeneral.user.birthday"
          md-placeholder="Birthday"
          md-open-on-focus
          md-max-date="userGeneral.today"
          md-current-view="year">
        </md-datepicker>
      </div>
      <!-- /BIRTHDAY -->

      <!-- PERSONAL IDENTIFICATION NUMBER -->
      <div layout-gt-xs="row">

        <md-input-container md-no-float class="md-block" flex-gt-xs="">
          <label>Personal Identification number</label>
          <input
            type="text"
            ng-model="userGeneral.user.cnp"
            placeholder="CNP"
            name="cnp"
            ng-pattern="/^\d{1}\d{2}(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])(0[1-9]|[1-4]\d| 5[0-2]|99)\d{4}$/">

          <div ng-messages="generalInfoForm.cnp.$error">
            <div ng-message="pattern">Please enter a valid CNP</div>
          </div>
        </md-input-container>

      </div>
      <!-- /PERSONAL IDENTIFICATION NUMBER -->

      <!-- CONTACT INFO -->
      <md-divider class="divider-bold u-mt-15 u-mb-20"></md-divider>

      <!-- Address -->
      <div layout-gt-xs="row">

        <md-input-container md-no-float class="md-block" flex-gt-xs="50">
          <label>City</label>
          <input
            type="text"
            name="city"
            ng-model="userGeneral.user.city"
            ng-pattern="/[a-zA-Z\.'-\s]{3,30}$/">

          <div ng-messages="generalInfoForm.city.$error">
            <div ng-message="pattern">Please enter a valid City name</div>
          </div>
        </md-input-container>

        <md-input-container md-no-float class="md-block" flex-gt-xs="50">
          <label>ZIP</label>
          <input
            type="text"
            name="zip_code"
            ng-model="userGeneral.user.zip_code"
            ng-disabled="userGeneral.disabledgeneralInfo"
            ng-pattern="/^\d{6}(?:[-\s]\d{4})?$/">

          <div ng-messages="generalInfoForm.zip_code.$error">
            <div ng-message="pattern">Please enter a valid ZIP code</div>
          </div>
        </md-input-container>

      </div>

      <div layout-gt-xs="row">
        <md-input-container md-no-float class="md-block" flex-gt-xs="100">
          <label>Address</label>
          <input
            type="text"
            name="adresa"
            ng-model="userGeneral.user.address"
            ng-disabled="userGeneral.disabledgeneralInfo">
        </md-input-container>
      </div>
      <!-- /Address -->

      <!-- PHONE AND EMAIL -->
      <div layout-gt-xs="row">

        <md-input-container md-no-float class="md-block" flex-gt-xs="50">

          <label>Phone</label>
          <input
            name="phone"
            ng-model="userGeneral.user.phone"
            ng-pattern="/^[0-9\-\+]{6,15}$/">

          <div ng-messages="generalInfoForm.phone.$error">
            <div ng-message="pattern">Please insert a valid phone number</div>
          </div>

        </md-input-container>

        <md-input-container md-no-float class="md-block" flex-gt-xs="50">

          <label>Email</label>
          <input
            ng-model="userGeneral.user.other_email"
            name="emailOther"
            type="email"
            ng-pattern="/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/">

          <div ng-messages="generalInfoForm.emailOther.$error">
            <div ng-message="pattern">Please insert a valid email</div>
          </div>

        </md-input-container>

      </div>
      <!-- /PHONE AND EMAIL -->

      <!-- CAR LICENSE -->
      <div layout-gt-xs="row">
        <md-input-container md-no-float class="md-block" flex-gt-xs="">

          <label>Car license plate</label>
          <input
            type="text"
            name="car_plate"
            ng-model="userGeneral.user.car_plate">

          <div ng-messages="generalInfoForm.car_plate.$error">
            <div ng-message="pattern">Please enter a valid Car license plate</div>
          </div>
        </md-input-container>
      </div>
      <!-- CAR LICENSE -->





      <!-- ASSIST INFO -->
      <md-divider class="divider-bold u-mt-15 u-mb-20"></md-divider>

      <!-- STARTED WORKING ON -->
      <div layout-gt-xs="row" layout-align="start center">
        <label flex-gt-xs="35" class="md-padding">
          <strong>Start date at Company</strong>
        </label>

        <md-datepicker
          ng-model="userGeneral.user.company_start_date"
          md-placeholder="Start date"
          md-open-on-focus
          md-max-date="userGeneral.today"
          md-current-view="year">
        </md-datepicker>

      </div>
      <!-- /STARTED WORKING ON -->


      <!-- ASSIST POSITION -->
      <div layout-gt-xs="row" layout-align="start center">

        <label flex-gt-xs="35" class="md-padding">
          <strong>Position</strong>
        </label>

        <md-input-container md-no-float class="md-block" flex-gt-xs="65">
          <md-select
            aria-label="Position"
            ng-model="userGeneral.position"
            ng-change="userGeneral.savePosition()"
            md-selected-text="userGeneral.position.name || 'Position'" >
              <md-option
               ng-value="item"
               ng-repeat="item in userGeneral.positions track by $index">
                 {{item.name}}
              </md-option>
          </md-select>
        </md-input-container>

      </div>
      <!-- /ASSIST POSITION -->



      <!-- ASSIST DEPARTMENT -->
      <div layout-gt-xs="row" layout-align="start center">

        <label flex-gt-xs="35" class="md-padding">
          <strong>Department*</strong>
        </label>

        <md-input-container md-no-float class="md-block" flex-gt-xs="65">
          <md-select
            aria-label="Department"
            ng-model="userGeneral.department"
            ng-change="userGeneral.saveDepartment()"
            md-selected-text="userGeneral.department.name || 'Department'"
            md-no-asterisk
            ng-required="!userGeneral.department">
              <md-option
               ng-value="item"
               ng-repeat="item in userGeneral.departments">
                 {{item.name}}
              </md-option>
          </md-select>

          <!-- <div ng-messages="generalInfoForm.department.$error">
            <div ng-message="required">This field is required</div>
            <div ng-message="pattern">Please enter a valid middle name</div>
          </div> -->
        </md-input-container>

      </div>
      <!-- /ASSIST DEAPARTMENT -->

      <!-- OFFICE AND CONTRACT -->
      <div layout-gt-xs="row"
        layout-align="start center">
        <label flex-gt-xs="35" class="md-padding u-mb-20">
          <strong>Office Nr.</strong>
        </label>
        <md-input-container md-no-float class="md-block" flex-gt-xs="65">
          <!-- @!TODO: De facut autocomplete aici, se cunosc birourile -->
          <label></label> <!-- required for accessibility to not show console warning -->
          <input
            type="text"
            name="office"
            ng-model="userGeneral.user.office_nr"
            ng-pattern="/^[A-Za-z0-9 _]{1,4}$/">
            <div ng-messages="generalInfoForm.office.$error">
            <div ng-message="pattern">Please enter a valid Number Office</div>
          </div>
        </md-input-container>
      </div>
      <!-- /OFFICE AND CONTRACT -->


      <!-- SSH KEY -->
      <div layout-gt-xs="row"
        layout-align="start center">
        <label flex-gt-xs="35" class="md-padding u-mb-20">
          <strong>Public SSH key</strong>
        </label>
        <md-input-container md-no-float class="md-block" flex-gt-xs="65">
          <label></label> <!-- required for accessibility to not show console warning -->
          <textarea
            type="text"
            name="office"
            ng-model="userGeneral.user.work_info.ssh_public_key">
          </textarea>
        </md-input-container>
      </div>
      <!-- /SSH KEY -->


      <!-- USERNAME OF ACCOUNTS -->
      <div layout-gt-xs="row">

        <!-- BITBUCKET USERNAME -->
        <md-input-container md-no-float class="md-block" flex-gt-xs="50">
          <label>Bitbucket Username</label>
          <input
            type="text"
            name="urgentContactName"
            ng-model="userGeneral.user.work_info.bitbucket"/>

          <div ng-messages="generalInfoForm.urgentContactName.$error">
            <div ng-message="required">This field is required</div>
            <div ng-message="pattern">Please enter a valid name</div>
          </div>
        </md-input-container>
        <!-- BITBUCKET USERNAME -->


        <!-- GITHUB USERNAME -->
        <md-input-container md-no-float class="md-block" flex-gt-xs="50">
         <label>Github Username</label>
          <input
            type="text"
            name="urgentContactPhone"
            ng-model="userGeneral.user.work_info.github"/>

            <div ng-messages="generalInfoForm.urgentContactPhone.$error">
              <div ng-message="required">This field is required</div>
              <div ng-message="pattern">Please enter a valid phone number</div>
          </div>
        </md-input-container>
        <!-- /GITHUB USERNAME -->

      </div>
      <!-- /USERNAME OF ACCOUNTS -->


      <md-divider class="divider-bold u-mt-15 u-mb-20"></md-divider>


      <!-- Urgent Contact -->
      <div layout-gt-xs="row">

        <md-input-container md-no-float class="md-block" flex-gt-xs="50">
          <label>Urgent Contact Name</label>
          <input
            type="text"
            name="urgentContactName"
            ng-model="userGeneral.user.urgent_contact_name"
            ng-pattern="/[a-zA-Z\.'-\s]{3,30}$/"/>

          <div ng-messages="generalInfoForm.urgentContactName.$error">
            <div ng-message="required">This field is required</div>
            <div ng-message="pattern">Please enter a valid name</div>
          </div>
        </md-input-container>

        <md-input-container md-no-float class="md-block" flex-gt-xs="50">
         <label>Urgent Contact Phone</label>
          <input
            type="text"
            name="urgentContactPhone"
            ng-model="userGeneral.user.urgent_contact_phone"
            ng-pattern="/^[0-9\-\+]{6,15}$/"/>

            <div ng-messages="generalInfoForm.urgentContactPhone.$error">
              <div ng-message="required">This field is required</div>
              <div ng-message="pattern">Please enter a valid phone number</div>
          </div>
        </md-input-container>

      </div>
      <!-- /Urgent Contact -->

    </md-content>
    <!-- /EDIT -->





    <!-- CARD ACTIONS-->
    <md-card-actions
      layout="column"
      layout-align="start"
      ng-show="!userGeneral.settings.showForm">
      <md-button
        class="c-card-profile__btn no-margin"
        ng-click="userGeneral.toggleForm(); userGeneral.saveCopy()">
        Add/Edit general information
      </md-button>
    </md-card-actions>

    <md-card-actions
      layout="row"
      layout-align="center center"
      ng-show="userGeneral.settings.showForm"
      class="additional">

      <md-button
        class="md-raised md-primary"
        ng-click="userGeneral.save()"
        ng-disabled="generalInfoForm.$invalid">
        Save
      </md-button>

      <md-button
        class="md-raised"
        ng-click="userGeneral.toggleForm(); userGeneral.cancel()">
        Cancel
      </md-button>

    </md-card-actions>
    <!-- /CARD ACTIONS-->
</form>




</md-card>
<!-- CARD GENERAL INFO -->
